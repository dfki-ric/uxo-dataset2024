from enum import Enum


def get_beamcount_from_pingmode(pingmode):
    if pingmode in [1, 2]:
        return 48

    if pingmode in [3, 4, 5]:
        return 96

    if pingmode in [6, 7, 8]:
        return 64

    if pingmode in [9, 10, 11, 12]:
        return 128
    
    return 0



FileHeaderDefinition =  '< IIIII f II ff II 32s 256s iiii IIIIIIIIIIIIIIIIII QQQ II 568x'
#                          ^ version
FrameHeaderDefinition = '< I Q II Q IIIIII ff I i IIIIII ffffffffffffffffffff dd f I fff IIII f I fffffffff d f III fff IIIIIII ffffff 16f ffff IIIIII ff IIIIII Q IIIIII ffff IIIIIIIIIIIIIIIII fff III ffffffffffff IIIIII HH Q fff II 288x'
#                              ^ version

class FileHeaderFields(str, Enum):
    version = "Version"
    frame_count = "FrameCount"
    frame_rate = "FrameRate"
    high_resolution = "HighResolution"
    num_raw_beams = "NumRawBeams"
    sample_rate = "SampleRate"
    samples_per_channel = "SamplesPerChannel"
    receiver_gain = "ReceiverGain"
    window_start = "WindowStart"
    window_length = "WindowLength"
    reverse = "Reverse"
    sn = "SN"
    str_date = "strDate"
    str_header_id = "strHeaderID"
    user_id1 = "UserID1"
    user_id2 = "UserID2"
    user_id3 = "UserID3"
    user_id4 = "UserID4"
    start_frame = "StartFrame"
    end_frame = "EndFrame"
    time_lapse = "TimeLapse"
    record_interval = "RecordInterval"
    radio_seconds = "RadioSeconds"
    frame_interval = "FrameInterval"
    flags = "Flags"
    aux_flags = "AuxFlags"
    sspd = "Sspd"
    flags3d = "Flags3D"
    software_version = "SoftwareVersion"
    water_temp = "WaterTemp"
    salinity = "Salinity"
    pulse_length = "PulseLength"
    tx_mode = "TxMode"
    version_fgpa = "VersionFGPA"
    version_p_su_c = "VersionPSuC"
    thumbnail_fi = "ThumbnailFI"
    file_size = "FileSize"
    optional_header_size = "OptionalHeaderSize"
    optional_tail_size = "OptionalTailSize"
    version_minor = "VersionMinor"
    large_lens = "LargeLens"

class FrameHeaderFields(str, Enum):
    frame_index = "FrameIndex"
    frame_time = "FrameTime"
    version = "Version"
    status = "Status"
    sonar_time_stamp = "sonarTimeStamp"
    ts_day = "TS_Day"
    ts_hour = "TS_Hour"
    ts_minute = "TS_Minute"
    ts_second = "TS_Second"
    ts_hsecond = "TS_Hsecond"
    transmit_mode = "TransmitMode"
    window_start = "WindowStart"
    window_length = "WindowLength"
    threshold = "Threshold"
    intensity = "Intensity"
    receiver_gain = "ReceiverGain"
    deg_c1 = "DegC1"
    deg_c2 = "DegC2"
    humidity = "Humidity"
    focus = "Focus"
    battery = "Battery"
    user_value1 = "UserValue1"
    user_value2 = "UserValue2"
    user_value3 = "UserValue3"
    user_value4 = "UserValue4"
    user_value5 = "UserValue5"
    user_value6 = "UserValue6"
    user_value7 = "UserValue7"
    user_value8 = "UserValue8"
    velocity = "Velocity"
    depth = "Depth"
    altitude = "Altitude"
    pitch = "Pitch"
    pitch_rate = "PitchRate"
    roll = "Roll"
    roll_rate = "RollRate"
    heading = "Heading"
    heading_rate = "HeadingRate"
    compass_heading = "CompassHeading"
    compass_pitch = "CompassPitch"
    compass_roll = "CompassRoll"
    latitude = "Latitude"
    longitude = "Longitude"
    sonar_position = "SonarPosition"
    config_flags = "ConfigFlags"
    beam_tilt = "BeamTilt"
    target_range = "TargetRange"
    target_bearing = "TargetBearing"
    target_present = "TargetPresent"
    firmware_revision = "FirmwareRevision"
    flags = "Flags"
    source_frame = "SourceFrame"
    water_temp = "WaterTemp"
    timer_period = "TimerPeriod"
    sonar_x = "SonarX"
    sonar_y = "SonarY"
    sonar_z = "SonarZ"
    sonar_pan = "SonarPan"
    sonar_tilt = "SonarTilt"
    sonar_roll = "SonarRoll"
    pan_pnnl = "PanPNNL"
    tilt_pnnl = "TiltPNNL"
    roll_pnnl = "RollPNNL"
    vehicle_time = "VehicleTime"
    time_ggk = "TimeGGK"
    date_ggk = "DateGGK"
    quality_ggk = "QualityGGK"
    num_sats_ggk = "NumSatsGGK"
    dopggk = "DOPGGK"
    ehtggk = "EHTGGK"
    heave_tss = "HeaveTSS"
    year_gps = "YearGPS"
    month_gps = "MonthGPS"
    day_gps = "DayGPS"
    hour_gps = "HourGPS"
    minute_gps = "MinuteGPS"
    second_gps = "SecondGPS"
    h_second_gps = "HSecondGPS"
    sonar_pan_offset = "SonarPanOffset"
    sonar_tilt_offset = "SonarTiltOffset"
    sonar_roll_offset = "SonarRollOffset"
    sonar_x_offset = "SonarXOffset"
    sonar_y_offset = "SonarYOffset"
    sonar_z_offset = "SonarZOffset"
    tmatrix_0 = "Tmatrix_0"
    tmatrix_1 = "Tmatrix_1"
    tmatrix_2 = "Tmatrix_2"
    tmatrix_3 = "Tmatrix_3"
    tmatrix_4 = "Tmatrix_4"
    tmatrix_5 = "Tmatrix_5"
    tmatrix_6 = "Tmatrix_6"
    tmatrix_7 = "Tmatrix_7"
    tmatrix_8 = "Tmatrix_8"
    tmatrix_9 = "Tmatrix_9"
    tmatrix_10 = "Tmatrix_10"
    tmatrix_11 = "Tmatrix_11"
    tmatrix_12 = "Tmatrix_12"
    tmatrix_13 = "Tmatrix_13"
    tmatrix_14 = "Tmatrix_14"
    tmatrix_15 = "Tmatrix_15"
    sample_rate = "SampleRate"
    accell_x = "AccellX"
    accell_y = "AccellY"
    accell_z = "AccellZ"
    ping_mode = "PingMode"
    frequency_hi_low = "FrequencyHiLow"
    pulse_width = "PulseWidth"
    cycle_period = "CyclePeriod"
    sample_period = "SamplePeriod"
    transmit_enable = "TransmitEnable"
    frame_rate = "FrameRate"
    sound_speed = "SoundSpeed"
    samples_per_beam = "SamplesPerBeam"
    enable150v = "Enable150V"
    sample_start_delay = "SampleStartDelay"
    large_lens = "LargeLens"
    the_system_type = "TheSystemType"
    sonar_serial_number = "SonarSerialNumber"
    reserved_ek = "ReservedEK"
    aris_error_flags_uint = "ArisErrorFlagsUint"
    missed_packets = "MissedPackets"
    aris_app_version = "ArisAppVersion"
    available2 = "Available2"
    reordered_samples = "ReorderedSamples"
    salinity = "Salinity"
    pressure = "Pressure"
    battery_voltage = "BatteryVoltage"
    main_voltage = "MainVoltage"
    switch_voltage = "SwitchVoltage"
    focus_motor_moving = "FocusMotorMoving"
    voltage_changing = "VoltageChanging"
    focus_timeout_fault = "FocusTimeoutFault"
    focus_over_current_fault = "FocusOverCurrentFault"
    focus_not_found_fault = "FocusNotFoundFault"
    focus_stalled_fault = "FocusStalledFault"
    fpga_timeout_fault = "FPGATimeoutFault"
    fpga_busy_fault = "FPGABusyFault"
    fpga_stuck_fault = "FPGAStuckFault"
    cpu_temp_fault = "CPUTempFault"
    psu_temp_fault = "PSUTempFault"
    water_temp_fault = "WaterTempFault"
    humidity_fault = "HumidityFault"
    pressure_fault = "PressureFault"
    voltage_read_fault = "VoltageReadFault"
    voltage_write_fault = "VoltageWriteFault"
    focus_current_position = "FocusCurrentPosition"
    target_pan = "TargetPan"
    target_tilt = "TargetTilt"
    target_roll = "TargetRoll"
    pan_motor_error_code = "PanMotorErrorCode"
    tilt_motor_error_code = "TiltMotorErrorCode"
    roll_motor_error_code = "RollMotorErrorCode"
    pan_abs_position = "PanAbsPosition"
    tilt_abs_position = "TiltAbsPosition"
    roll_abs_position = "RollAbsPosition"
    pan_accel_x = "PanAccelX"
    pan_accel_y = "PanAccelY"
    pan_accel_z = "PanAccelZ"
    tilt_accel_x = "TiltAccelX"
    tilt_accel_y = "TiltAccelY"
    tilt_accel_z = "TiltAccelZ"
    roll_accel_x = "RollAccelX"
    roll_accel_y = "RollAccelY"
    roll_accel_z = "RollAccelZ"
    applied_settings = "AppliedSettings"
    constrained_settings = "ConstrainedSettings"
    invalid_settings = "InvalidSettings"
    enable_interpacket_delay = "EnableInterpacketDelay"
    interpacket_delay_period = "InterpacketDelayPeriod"
    uptime = "Uptime"
    aris_app_version_major = "ArisAppVersionMajor"
    aris_app_version_minor = "ArisAppVersionMinor"
    go_time = "GoTime"
    pan_velocity = "PanVelocity"
    tilt_velocity = "TiltVelocity"
    roll_velocity = "RollVelocity"
    gps_time_age = "GpsTimeAge"
    system_variant = "SystemVariant"


# Triplets of beam angles: (center, left, right)
BeamWidthsAris3000_64 = [
    (-14.8872, -15.1175, -14.6569),
    (-14.4266, -14.6569, -14.1952),
    (-13.9637, -14.1952, -13.7314),
    (-13.4990, -13.7314, -13.2661),
    (-13.0332, -13.2661, -12.7999),
    (-12.5665, -12.7999, -12.3326),
    (-12.0986, -12.3326, -11.8641),
    (-11.6295, -11.8641, -11.3944),
    (-11.1593, -11.3944, -10.9238),
    (-10.6883, -10.9238, -10.4524),
    (-10.2165, -10.4524, -9.9802),
    (-9.7439, -9.9802, -9.5073),
    (-9.2706, -9.5073, -9.0338),
    (-8.7969, -9.0338, -8.5599),
    (-8.3228, -8.5599, -8.0857),
    (-7.8486, -8.0857, -7.6114),
    (-7.3742, -7.6114, -7.1370),
    (-6.8997, -7.1370, -6.6624),
    (-6.4250, -6.6624, -6.1876),
    (-5.9502, -6.1876, -5.7128),
    (-5.4753, -5.7128, -5.2378),
    (-5.0003, -5.2378, -4.7627),
    (-4.5251, -4.7627, -4.2875),
    (-4.0499, -4.2875, -3.8122),
    (-3.5745, -3.8122, -3.3368),
    (-3.0991, -3.3368, -2.8613),
    (-2.6234, -2.8613, -2.3854),
    (-2.1473, -2.3854, -1.9091),
    (-1.6708, -1.9091, -1.4324),
    (-1.1939, -1.4324, -0.9553),
    (-0.7166, -0.9553, -0.4778),
    (-0.2389, -0.4778, 0.0000),
    (0.2389, 0.0000, 0.4778),
    (0.7166, 0.4778, 0.9553),
    (1.1939, 0.9553, 1.4324),
    (1.6708, 1.4324, 1.9091),
    (2.1473, 1.9091, 2.3854),
    (2.6234, 2.3854, 2.8613),
    (3.0991, 2.8613, 3.3368),
    (3.5745, 3.3368, 3.8122),
    (4.0499, 3.8122, 4.2875),
    (4.5251, 4.2875, 4.7627),
    (5.0003, 4.7627, 5.2378),
    (5.4753, 5.2378, 5.7128),
    (5.9502, 5.7128, 6.1876),
    (6.4250, 6.1876, 6.6624),
    (6.8997, 6.6624, 7.1370),
    (7.3742, 7.1370, 7.6114),
    (7.8486, 7.6114, 8.0857),
    (8.3228, 8.0857, 8.5599),
    (8.7969, 8.5599, 9.0338),
    (9.2706, 9.0338, 9.5073),
    (9.7439, 9.5073, 9.9802),
    (10.2165, 9.9802, 10.4524),
    (10.6883, 10.4524, 10.9238),
    (11.1593, 10.9238, 11.3944),
    (11.6295, 11.3944, 11.8641),
    (12.0986, 11.8641, 12.3326),
    (12.5665, 12.3326, 12.7999),
    (13.0332, 12.7999, 13.2661),
    (13.4990, 13.2661, 13.7314),
    (13.9637, 13.7314, 14.1952),
    (14.4266, 14.1952, 14.6569),
    (14.8872, 14.6569, 15.1175),
]

# Triplets of beam angles: (center, left, right)
BeamWidthsAris3000_128 = [
    (-15.0068, -15.1218, -14.8918),
    (-14.7768, -14.8918, -14.6615),
    (-14.5462, -14.6615, -14.4306),
    (-14.3150, -14.4306, -14.1992),
    (-14.0833, -14.1992, -13.9672),
    (-13.8511, -13.9672, -13.7349),
    (-13.6186, -13.7349, -13.5022),
    (-13.3858, -13.5022, -13.2693),
    (-13.1528, -13.2693, -13.0362),
    (-12.9196, -13.0362, -12.8029),
    (-12.6861, -12.8029, -12.5692),
    (-12.4523, -12.5692, -12.3353),
    (-12.2182, -12.3353, -12.101),
    (-11.9838, -12.101, -11.8665),
    (-11.7491, -11.8665, -11.6316),
    (-11.5141, -11.6316, -11.3965),
    (-11.2789, -11.3965, -11.1612),
    (-11.0435, -11.1612, -10.9257),
    (-10.8079, -10.9257, -10.6900),
    (-10.5721, -10.6900, -10.4541),
    (-10.3361, -10.4541, -10.218),
    (-10.0999, -10.218, -9.9817),
    (-9.8635, -9.9817, -9.7452),
    (-9.6269, -9.7452, -9.5086),
    (-9.3902, -9.5086, -9.2718),
    (-9.1534, -9.2718, -9.0350),
    (-8.9165, -9.0350, -8.7980),
    (-8.6795, -8.7980, -8.5610),
    (-8.4424, -8.5610, -8.3239),
    (-8.2053, -8.3239, -8.0868),
    (-7.9682, -8.0868, -7.8496),
    (-7.7310, -7.8496, -7.6124),
    (-7.4938, -7.6124, -7.3752),
    (-7.2566, -7.3752, -7.1380),
    (-7.0193, -7.1380, -6.9007),
    (-6.7820, -6.9007, -6.6633),
    (-6.5446, -6.6633, -6.4259),
    (-6.3072, -6.4259, -6.1885),
    (-6.0698, -6.1885, -5.9511),
    (-5.8324, -5.9511, -5.7137),
    (-5.5949, -5.7137, -5.4762),
    (-5.3574, -5.4762, -5.2387),
    (-5.1199, -5.2387, -5.0011),
    (-4.8823, -5.0011, -4.7635),
    (-4.6447, -4.7635, -4.5259),
    (-4.4071, -4.5259, -4.2883),
    (-4.1695, -4.2883, -4.0507),
    (-3.9318, -4.0507, -3.8130),
    (-3.6941, -3.8130, -3.5753),
    (-3.4564, -3.5753, -3.3376),
    (-3.2187, -3.3376, -3.0998),
    (-2.9809, -3.0998, -2.8620),
    (-2.7430, -2.8620, -2.6240),
    (-2.5050, -2.6240, -2.3860),
    (-2.2669, -2.3860, -2.1478),
    (-2.0287, -2.1478, -1.9096),
    (-1.7904, -1.9096, -1.6712),
    (-1.5520, -1.6712, -1.4328),
    (-1.3135, -1.4328, -1.1942),
    (-1.0749, -1.1942, -0.9556),
    (-0.8362, -0.9556, -0.7168),
    (-0.5974, -0.7168, -0.4780),
    (-0.3585, -0.4780, -0.2391),
    (-0.1196, -0.2391, -0.0001),
    (0.1194, -0.0001, 0.2389),
    (0.3584, 0.2389, 0.4779),
    (0.5973, 0.4779, 0.7168),
    (0.8362, 0.7168, 0.9556),
    (1.0750, 0.9556, 1.1944),
    (1.3137, 1.1944, 1.4330),
    (1.5523, 1.4330, 1.6716),
    (1.7908, 1.6716, 1.9100),
    (2.0292, 1.9100, 2.1484),
    (2.2675, 2.1484, 2.3866),
    (2.5057, 2.3866, 2.6248),
    (2.7438, 2.6248, 2.8628),
    (2.9818, 2.8628, 3.1008),
    (3.2197, 3.1008, 3.3386),
    (3.4575, 3.3386, 3.5764),
    (3.6952, 3.5764, 3.8141),
    (3.9329, 3.8141, 4.0518),
    (4.1706, 4.0518, 4.2895),
    (4.4083, 4.2895, 4.5271),
    (4.6459, 4.5271, 4.7647),
    (4.8835, 4.7647, 5.0023),
    (5.1211, 5.0023, 5.2399),
    (5.3587, 5.2399, 5.4775),
    (5.5962, 5.4775, 5.7150),
    (5.8337, 5.7150, 5.9525),
    (6.0712, 5.9525, 6.1899),
    (6.3086, 6.1899, 6.4273),
    (6.5460, 6.4273, 6.6647),
    (6.7834, 6.6647, 6.9021),
    (7.0208, 6.9021, 7.1395),
    (7.2581, 7.1395, 7.3768),
    (7.4954, 7.3768, 7.6140),
    (7.7326, 7.6140, 7.8512),
    (7.9698, 7.8512, 8.0884),
    (8.2070, 8.0884, 8.3256),
    (8.4441, 8.3256, 8.5627),
    (8.6812, 8.5627, 8.7998),
    (8.9183, 8.7998, 9.0368),
    (9.1553, 9.0368, 9.2738),
    (9.3922, 9.2738, 9.5106),
    (9.6290, 9.5106, 9.7474),
    (9.8657, 9.7474, 9.9840),
    (10.1023, 9.9840, 10.2205),
    (10.3387, 10.2205, 10.4568),
    (10.5749, 10.4568, 10.6929),
    (10.8109, 10.6929, 10.9288),
    (11.0467, 10.9288, 11.1645),
    (11.2823, 11.1645, 11.4000),
    (11.5177, 11.4000, 11.6353),
    (11.7529, 11.6353, 11.8704),
    (11.9879, 11.8704, 12.1053),
    (12.2226, 12.1053, 12.3398),
    (12.4570, 12.3398, 12.5741),
    (12.6911, 12.5741, 12.8080),
    (12.9249, 12.8080, 13.0417),
    (13.1584, 13.0417, 13.2750),
    (13.3916, 13.2750, 13.5081),
    (13.6246, 13.5081, 13.7410),
    (13.8574, 13.7410, 13.9737),
    (14.0899, 13.9737, 14.2060),
    (14.3221, 14.2060, 14.4380),
    (14.5538, 14.4380, 14.6694),
    (14.7850, 14.6694, 14.9003),
    (15.0156, 14.9003, 15.1306),
]